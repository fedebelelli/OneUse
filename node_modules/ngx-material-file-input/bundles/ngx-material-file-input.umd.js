(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/forms'), require('@angular/material'), require('@angular/cdk/a11y'), require('@angular/cdk/coercion'), require('rxjs')) :
    typeof define === 'function' && define.amd ? define('ngx-material-file-input', ['exports', '@angular/core', '@angular/forms', '@angular/material', '@angular/cdk/a11y', '@angular/cdk/coercion', 'rxjs'], factory) :
    (factory((global['ngx-material-file-input'] = {}),global.ng.core,global.ng.forms,global.ng.material,global.ng.cdk.a11y,global.ng.cdk.coercion,global.rxjs));
}(this, (function (exports,core,forms,material,a11y,coercion,rxjs) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Optional token to provide custom configuration to the module
     * @type {?}
     */
    var NGX_MAT_FILE_INPUT_CONFIG = new core.InjectionToken('ngx-mat-file-input.config');
    /**
     * Provide additional configuration to dynamically customize the module injection
     */
    var /**
     * Provide additional configuration to dynamically customize the module injection
     */ FileInputConfig = /** @class */ (function () {
        function FileInputConfig() {
        }
        return FileInputConfig;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * The files to be uploaded
     */
    var /**
     * The files to be uploaded
     */ FileInput = /** @class */ (function () {
        function FileInput(_files, delimiter) {
            if (delimiter === void 0) {
                delimiter = ', ';
            }
            this._files = _files;
            this.delimiter = delimiter;
            this._fileNames = (this._files || []).map(function (f) { return f.name; }).join(delimiter);
        }
        Object.defineProperty(FileInput.prototype, "files", {
            get: /**
             * @return {?}
             */ function () {
                return this._files || [];
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FileInput.prototype, "fileNames", {
            get: /**
             * @return {?}
             */ function () {
                return this._fileNames;
            },
            enumerable: true,
            configurable: true
        });
        return FileInput;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FileInputComponent = /** @class */ (function () {
        /**
         * @see https://angular.io/api/forms/ControlValueAccessor
         */
        function FileInputComponent(ngControl, fm, _elementRef, _renderer) {
            var _this = this;
            this.ngControl = ngControl;
            this.fm = fm;
            this._elementRef = _elementRef;
            this._renderer = _renderer;
            this.stateChanges = new rxjs.Subject();
            this.focused = false;
            this.controlType = 'file-input';
            this.autofilled = false;
            this._required = false;
            this.accept = null;
            this.id = "ngx-mat-file-input-" + FileInputComponent.nextId++;
            this.describedBy = '';
            this._onChange = function (_) { };
            this._onTouched = function () { };
            if (this.ngControl != null) {
                this.ngControl.valueAccessor = this;
            }
            fm.monitor(_elementRef.nativeElement, true).subscribe(function (origin) {
                _this.focused = !!origin;
                _this.stateChanges.next();
            });
        }
        /**
         * @param {?} ids
         * @return {?}
         */
        FileInputComponent.prototype.setDescribedByIds = /**
         * @param {?} ids
         * @return {?}
         */
            function (ids) {
                this.describedBy = ids.join(' ');
            };
        Object.defineProperty(FileInputComponent.prototype, "value", {
            get: /**
             * @return {?}
             */ function () {
                return this.empty ? null : new FileInput(this._elementRef.nativeElement.value || []);
            },
            set: /**
             * @param {?} fileInput
             * @return {?}
             */ function (fileInput) {
                if (fileInput) {
                    this.writeValue(fileInput);
                    this.stateChanges.next();
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FileInputComponent.prototype, "placeholder", {
            get: /**
             * @return {?}
             */ function () {
                return this._placeholder;
            },
            set: /**
             * @param {?} plh
             * @return {?}
             */ function (plh) {
                this._placeholder = plh;
                this.stateChanges.next();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FileInputComponent.prototype, "empty", {
            /**
             * Whether the current input has files
             */
            get: /**
             * Whether the current input has files
             * @return {?}
             */ function () {
                return !this._elementRef.nativeElement.value || this._elementRef.nativeElement.value.length === 0;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FileInputComponent.prototype, "shouldLabelFloat", {
            get: /**
             * @return {?}
             */ function () {
                return this.focused || !this.empty || this.valuePlaceholder !== undefined;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FileInputComponent.prototype, "required", {
            get: /**
             * @return {?}
             */ function () {
                return this._required;
            },
            set: /**
             * @param {?} req
             * @return {?}
             */ function (req) {
                this._required = coercion.coerceBooleanProperty(req);
                this.stateChanges.next();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FileInputComponent.prototype, "isDisabled", {
            get: /**
             * @return {?}
             */ function () {
                return this.disabled;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FileInputComponent.prototype, "disabled", {
            get: /**
             * @return {?}
             */ function () {
                return this._elementRef.nativeElement.disabled;
            },
            set: /**
             * @param {?} dis
             * @return {?}
             */ function (dis) {
                this.setDisabledState(coercion.coerceBooleanProperty(dis));
                this.stateChanges.next();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FileInputComponent.prototype, "errorState", {
            get: /**
             * @return {?}
             */ function () {
                return this.ngControl.errors !== null && !!this.ngControl.touched;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} event
         * @return {?}
         */
        FileInputComponent.prototype.onContainerClick = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if ((( /** @type {?} */(event.target))).tagName.toLowerCase() !== 'input' && !this.disabled) {
                    this._elementRef.nativeElement.querySelector('input').focus();
                    this.focused = true;
                    this.open();
                }
            };
        Object.defineProperty(FileInputComponent.prototype, "fileNames", {
            get: /**
             * @return {?}
             */ function () {
                return this.value ? this.value.fileNames : this.valuePlaceholder;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} obj
         * @return {?}
         */
        FileInputComponent.prototype.writeValue = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                this._renderer.setProperty(this._elementRef.nativeElement, 'value', obj instanceof FileInput ? obj.files : null);
            };
        /**
         * @param {?} fn
         * @return {?}
         */
        FileInputComponent.prototype.registerOnChange = /**
         * @param {?} fn
         * @return {?}
         */
            function (fn) {
                this._onChange = fn;
            };
        /**
         * @param {?} fn
         * @return {?}
         */
        FileInputComponent.prototype.registerOnTouched = /**
         * @param {?} fn
         * @return {?}
         */
            function (fn) {
                this._onTouched = fn;
            };
        /**
         * Remove all files from the file input component
         * @param [event] optional event that may have triggered the clear action
         */
        /**
         * Remove all files from the file input component
         * @param {?=} event
         * @return {?}
         */
        FileInputComponent.prototype.clear = /**
         * Remove all files from the file input component
         * @param {?=} event
         * @return {?}
         */
            function (event) {
                if (event) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                this.value = new FileInput([]);
                this._elementRef.nativeElement.querySelector('input').value = null;
                this._onChange(this.value);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        FileInputComponent.prototype.change = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                /** @type {?} */
                var fileList = (( /** @type {?} */(event.target))).files;
                /** @type {?} */
                var fileArray = [];
                if (fileList) {
                    for (var i = 0; i < fileList.length; i++) {
                        fileArray.push(fileList[i]);
                    }
                }
                this.value = new FileInput(fileArray);
                this._onChange(this.value);
            };
        /**
         * @return {?}
         */
        FileInputComponent.prototype.blur = /**
         * @return {?}
         */
            function () {
                this.focused = false;
                this._onTouched();
            };
        /**
         * @param {?} isDisabled
         * @return {?}
         */
        FileInputComponent.prototype.setDisabledState = /**
         * @param {?} isDisabled
         * @return {?}
         */
            function (isDisabled) {
                this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);
            };
        /**
         * @return {?}
         */
        FileInputComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.multiple = coercion.coerceBooleanProperty(this.multiple);
            };
        /**
         * @return {?}
         */
        FileInputComponent.prototype.open = /**
         * @return {?}
         */
            function () {
                if (!this.disabled) {
                    this._elementRef.nativeElement.querySelector('input').click();
                }
            };
        /**
         * @return {?}
         */
        FileInputComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.stateChanges.complete();
                this.fm.stopMonitoring(this._elementRef.nativeElement);
            };
        FileInputComponent.nextId = 0;
        FileInputComponent.decorators = [
            { type: core.Component, args: [{
                        // tslint:disable-next-line:component-selector
                        selector: 'ngx-mat-file-input',
                        template: "<input #input type=\"file\" [attr.multiple]=\"multiple? '' : null\" [attr.accept]=\"accept\">\n<span class=\"filename\">{{ fileNames }}</span>\n",
                        providers: [{ provide: material.MatFormFieldControl, useExisting: FileInputComponent }],
                        styles: [":host{display:inline-block}:host:not(.file-input-disabled){cursor:pointer}input{width:0;height:0;opacity:0;overflow:hidden;position:absolute;z-index:-1}.filename{display:inline-block}"]
                    }] }
        ];
        /** @nocollapse */
        FileInputComponent.ctorParameters = function () {
            return [
                { type: forms.NgControl, decorators: [{ type: core.Optional }, { type: core.Self }] },
                { type: a11y.FocusMonitor },
                { type: core.ElementRef },
                { type: core.Renderer2 }
            ];
        };
        FileInputComponent.propDecorators = {
            autofilled: [{ type: core.Input }],
            valuePlaceholder: [{ type: core.Input }],
            multiple: [{ type: core.Input }],
            accept: [{ type: core.Input }],
            id: [{ type: core.HostBinding }],
            describedBy: [{ type: core.HostBinding, args: ['attr.aria-describedby',] }],
            value: [{ type: core.Input }],
            placeholder: [{ type: core.Input }],
            shouldLabelFloat: [{ type: core.HostBinding, args: ['class.mat-form-field-should-float',] }],
            required: [{ type: core.Input }],
            isDisabled: [{ type: core.HostBinding, args: ['class.file-input-disabled',] }],
            disabled: [{ type: core.Input }],
            errorState: [{ type: core.Input }],
            change: [{ type: core.HostListener, args: ['change', ['$event'],] }],
            blur: [{ type: core.HostListener, args: ['focusout',] }]
        };
        return FileInputComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ByteFormatPipe = /** @class */ (function () {
        function ByteFormatPipe(config) {
            this.config = config;
            this.unit = config ? config.sizeUnit : 'Byte';
        }
        /**
         * @param {?} value
         * @param {?=} args
         * @return {?}
         */
        ByteFormatPipe.prototype.transform = /**
         * @param {?} value
         * @param {?=} args
         * @return {?}
         */
            function (value, args) {
                if (parseInt(value, 10) >= 0) {
                    value = this.formatBytes(+value, +args);
                }
                return value;
            };
        /**
         * @private
         * @param {?} bytes
         * @param {?=} decimals
         * @return {?}
         */
        ByteFormatPipe.prototype.formatBytes = /**
         * @private
         * @param {?} bytes
         * @param {?=} decimals
         * @return {?}
         */
            function (bytes, decimals) {
                if (bytes === 0) {
                    return '0 ' + this.unit;
                }
                /** @type {?} */
                var B = this.unit.charAt(0);
                /** @type {?} */
                var k = 1024;
                /** @type {?} */
                var dm = decimals || 2;
                /** @type {?} */
                var sizes = [this.unit, 'K' + B, 'M' + B, 'G' + B, 'T' + B, 'P' + B, 'E' + B, 'Z' + B, 'Y' + B];
                /** @type {?} */
                var i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
            };
        ByteFormatPipe.decorators = [
            { type: core.Pipe, args: [{
                        name: 'byteFormat'
                    },] }
        ];
        /** @nocollapse */
        ByteFormatPipe.ctorParameters = function () {
            return [
                { type: FileInputConfig, decorators: [{ type: core.Optional }, { type: core.Inject, args: [NGX_MAT_FILE_INPUT_CONFIG,] }] }
            ];
        };
        return ByteFormatPipe;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MaterialFileInputModule = /** @class */ (function () {
        function MaterialFileInputModule() {
        }
        MaterialFileInputModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [FileInputComponent, ByteFormatPipe],
                        providers: [a11y.FocusMonitor],
                        exports: [FileInputComponent, ByteFormatPipe]
                    },] }
        ];
        return MaterialFileInputModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    (function (FileValidator) {
        /**
         * Function to control content of files
         *
         * @param {?} bytes max number of bytes allowed
         *
         * @return {?}
         */
        function maxContentSize(bytes) {
            return function (control) {
                /** @type {?} */
                var size = control && control.value ? (( /** @type {?} */(control.value))).files.map(function (f) { return f.size; }).reduce(function (acc, i) { return acc + i; }, 0) : 0;
                /** @type {?} */
                var condition = bytes >= size;
                return condition
                    ? null
                    : {
                        maxContentSize: {
                            actualSize: size,
                            maxSize: bytes
                        }
                    };
            };
        }
        FileValidator.maxContentSize = maxContentSize;
    })(exports.FileValidator || (exports.FileValidator = {}));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.NGX_MAT_FILE_INPUT_CONFIG = NGX_MAT_FILE_INPUT_CONFIG;
    exports.MaterialFileInputModule = MaterialFileInputModule;
    exports.FileInputComponent = FileInputComponent;
    exports.FileInputConfig = FileInputConfig;
    exports.ByteFormatPipe = ByteFormatPipe;
    exports.FileInput = FileInput;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LW1hdGVyaWFsLWZpbGUtaW5wdXQudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZ3gtbWF0ZXJpYWwtZmlsZS1pbnB1dC9saWIvbW9kZWwvZmlsZS1pbnB1dC1jb25maWcubW9kZWwudHMiLCJuZzovL25neC1tYXRlcmlhbC1maWxlLWlucHV0L2xpYi9tb2RlbC9maWxlLWlucHV0Lm1vZGVsLnRzIiwibmc6Ly9uZ3gtbWF0ZXJpYWwtZmlsZS1pbnB1dC9saWIvZmlsZS1pbnB1dC9maWxlLWlucHV0LmNvbXBvbmVudC50cyIsIm5nOi8vbmd4LW1hdGVyaWFsLWZpbGUtaW5wdXQvbGliL3BpcGUvYnl0ZS1mb3JtYXQucGlwZS50cyIsIm5nOi8vbmd4LW1hdGVyaWFsLWZpbGUtaW5wdXQvbGliL21hdGVyaWFsLWZpbGUtaW5wdXQubW9kdWxlLnRzIiwibmc6Ly9uZ3gtbWF0ZXJpYWwtZmlsZS1pbnB1dC9saWIvdmFsaWRhdG9yL2ZpbGUtdmFsaWRhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8qKlxuICogT3B0aW9uYWwgdG9rZW4gdG8gcHJvdmlkZSBjdXN0b20gY29uZmlndXJhdGlvbiB0byB0aGUgbW9kdWxlXG4gKi9cbmV4cG9ydCBjb25zdCBOR1hfTUFUX0ZJTEVfSU5QVVRfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPEZpbGVJbnB1dENvbmZpZz4oXG4gICduZ3gtbWF0LWZpbGUtaW5wdXQuY29uZmlnJ1xuKTtcblxuLyoqXG4gKiBQcm92aWRlIGFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiB0byBkeW5hbWljYWxseSBjdXN0b21pemUgdGhlIG1vZHVsZSBpbmplY3Rpb25cbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVJbnB1dENvbmZpZyB7XG4gIC8qKlxuICAgKiBVbml0IHVzZWQgd2l0aCB0aGUgQnl0ZUZvcm1hdFBpcGUsIGRlZmF1bHQgdmFsdWUgaXMgKkJ5dGUqLlxuICAgKiBUaGUgZmlyc3QgbGV0dGVyIGlzIHVzZWQgZm9yIHRoZSBzaG9ydCBub3RhdGlvbi5cbiAgICovXG4gIHNpemVVbml0OiBzdHJpbmc7XG59XG4iLCIvKipcbiAqIFRoZSBmaWxlcyB0byBiZSB1cGxvYWRlZFxuICovXG5leHBvcnQgY2xhc3MgRmlsZUlucHV0IHtcbiAgcHJpdmF0ZSBfZmlsZU5hbWVzOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfZmlsZXM6IEZpbGVbXSB8IG51bGwsIHByaXZhdGUgZGVsaW1pdGVyOiBzdHJpbmcgPSAnLCAnKSB7XG4gICAgdGhpcy5fZmlsZU5hbWVzID0gKHRoaXMuX2ZpbGVzIHx8IFtdKS5tYXAoKGY6IEZpbGUpID0+IGYubmFtZSkuam9pbihkZWxpbWl0ZXIpO1xuICB9XG5cbiAgZ2V0IGZpbGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9maWxlcyB8fCBbXTtcbiAgfVxuXG4gIGdldCBmaWxlTmFtZXMoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fZmlsZU5hbWVzO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEVsZW1lbnRSZWYsIE9uRGVzdHJveSwgSG9zdEJpbmRpbmcsIFJlbmRlcmVyMiwgSG9zdExpc3RlbmVyLCBPcHRpb25hbCwgU2VsZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5nQ29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IE1hdEZvcm1GaWVsZENvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBGb2N1c01vbml0b3IgfSBmcm9tICdAYW5ndWxhci9jZGsvYTExeSc7XG5pbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHkgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBGaWxlSW5wdXQgfSBmcm9tICcuLi9tb2RlbC9maWxlLWlucHV0Lm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICduZ3gtbWF0LWZpbGUtaW5wdXQnLFxuICB0ZW1wbGF0ZVVybDogJy4vZmlsZS1pbnB1dC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2ZpbGUtaW5wdXQuY29tcG9uZW50LmNzcyddLFxuICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE1hdEZvcm1GaWVsZENvbnRyb2wsIHVzZUV4aXN0aW5nOiBGaWxlSW5wdXRDb21wb25lbnQgfV1cbn0pXG5leHBvcnQgY2xhc3MgRmlsZUlucHV0Q29tcG9uZW50IGltcGxlbWVudHMgTWF0Rm9ybUZpZWxkQ29udHJvbDxGaWxlSW5wdXQ+LCBDb250cm9sVmFsdWVBY2Nlc3NvciwgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBzdGF0aWMgbmV4dElkID0gMDtcblxuICBzdGF0ZUNoYW5nZXMgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuICBmb2N1c2VkID0gZmFsc2U7XG4gIGNvbnRyb2xUeXBlID0gJ2ZpbGUtaW5wdXQnO1xuXG4gIEBJbnB1dCgpIGF1dG9maWxsZWQgPSBmYWxzZTtcblxuICBwcml2YXRlIF9wbGFjZWhvbGRlcjogc3RyaW5nO1xuICBwcml2YXRlIF9yZXF1aXJlZCA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpIHZhbHVlUGxhY2Vob2xkZXI6IHN0cmluZztcbiAgQElucHV0KCkgbXVsdGlwbGU6IGJvb2xlYW47XG4gIEBJbnB1dCgpIGFjY2VwdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgQEhvc3RCaW5kaW5nKCkgaWQgPSBgbmd4LW1hdC1maWxlLWlucHV0LSR7RmlsZUlucHV0Q29tcG9uZW50Lm5leHRJZCsrfWA7XG4gIEBIb3N0QmluZGluZygnYXR0ci5hcmlhLWRlc2NyaWJlZGJ5JykgZGVzY3JpYmVkQnkgPSAnJztcblxuICBzZXREZXNjcmliZWRCeUlkcyhpZHM6IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5kZXNjcmliZWRCeSA9IGlkcy5qb2luKCcgJyk7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgdmFsdWUoKTogRmlsZUlucHV0IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZW1wdHkgPyBudWxsIDogbmV3IEZpbGVJbnB1dCh0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQudmFsdWUgfHwgW10pO1xuICB9XG4gIHNldCB2YWx1ZShmaWxlSW5wdXQ6IEZpbGVJbnB1dCB8IG51bGwpIHtcbiAgICBpZiAoZmlsZUlucHV0KSB7XG4gICAgICB0aGlzLndyaXRlVmFsdWUoZmlsZUlucHV0KTtcbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VzLm5leHQoKTtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgcGxhY2Vob2xkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BsYWNlaG9sZGVyO1xuICB9XG4gIHNldCBwbGFjZWhvbGRlcihwbGgpIHtcbiAgICB0aGlzLl9wbGFjZWhvbGRlciA9IHBsaDtcbiAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgY3VycmVudCBpbnB1dCBoYXMgZmlsZXNcbiAgICovXG4gIGdldCBlbXB0eSgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudC52YWx1ZSB8fCB0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQudmFsdWUubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5tYXQtZm9ybS1maWVsZC1zaG91bGQtZmxvYXQnKVxuICBnZXQgc2hvdWxkTGFiZWxGbG9hdCgpIHtcbiAgICByZXR1cm4gdGhpcy5mb2N1c2VkIHx8ICF0aGlzLmVtcHR5IHx8IHRoaXMudmFsdWVQbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkO1xuICB9XG5cbiAgQElucHV0KClcbiAgZ2V0IHJlcXVpcmVkKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1aXJlZDtcbiAgfVxuICBzZXQgcmVxdWlyZWQocmVxOiBib29sZWFuKSB7XG4gICAgdGhpcy5fcmVxdWlyZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkocmVxKTtcbiAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZpbGUtaW5wdXQtZGlzYWJsZWQnKVxuICBnZXQgaXNEaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgfVxuICBASW5wdXQoKVxuICBnZXQgZGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5kaXNhYmxlZDtcbiAgfVxuICBzZXQgZGlzYWJsZWQoZGlzOiBib29sZWFuKSB7XG4gICAgdGhpcy5zZXREaXNhYmxlZFN0YXRlKGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShkaXMpKTtcbiAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgZXJyb3JTdGF0ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5uZ0NvbnRyb2wuZXJyb3JzICE9PSBudWxsICYmICEhdGhpcy5uZ0NvbnRyb2wudG91Y2hlZDtcbiAgfVxuXG4gIG9uQ29udGFpbmVyQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBpZiAoKGV2ZW50LnRhcmdldCBhcyBFbGVtZW50KS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdpbnB1dCcgJiYgIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmZvY3VzKCk7XG4gICAgICB0aGlzLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBzZWUgaHR0cHM6Ly9hbmd1bGFyLmlvL2FwaS9mb3Jtcy9Db250cm9sVmFsdWVBY2Nlc3NvclxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgQE9wdGlvbmFsKClcbiAgICBAU2VsZigpXG4gICAgcHVibGljIG5nQ29udHJvbDogTmdDb250cm9sLFxuICAgIHByaXZhdGUgZm06IEZvY3VzTW9uaXRvcixcbiAgICBwcml2YXRlIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgX3JlbmRlcmVyOiBSZW5kZXJlcjJcbiAgKSB7XG4gICAgaWYgKHRoaXMubmdDb250cm9sICE9IG51bGwpIHtcbiAgICAgIHRoaXMubmdDb250cm9sLnZhbHVlQWNjZXNzb3IgPSB0aGlzO1xuICAgIH1cbiAgICBmbS5tb25pdG9yKF9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHRydWUpLnN1YnNjcmliZShvcmlnaW4gPT4ge1xuICAgICAgdGhpcy5mb2N1c2VkID0gISFvcmlnaW47XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9vbkNoYW5nZSA9IChfOiBhbnkpID0+IHt9O1xuICBwcml2YXRlIF9vblRvdWNoZWQgPSAoKSA9PiB7fTtcblxuICBnZXQgZmlsZU5hbWVzKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlID8gdGhpcy52YWx1ZS5maWxlTmFtZXMgOiB0aGlzLnZhbHVlUGxhY2Vob2xkZXI7XG4gIH1cblxuICB3cml0ZVZhbHVlKG9iajogRmlsZUlucHV0IHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ3ZhbHVlJywgb2JqIGluc3RhbmNlb2YgRmlsZUlucHV0ID8gb2JqLmZpbGVzIDogbnVsbCk7XG4gIH1cblxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiAoXzogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fb25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGZpbGVzIGZyb20gdGhlIGZpbGUgaW5wdXQgY29tcG9uZW50XG4gICAqIEBwYXJhbSBbZXZlbnRdIG9wdGlvbmFsIGV2ZW50IHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkIHRoZSBjbGVhciBhY3Rpb25cbiAgICovXG4gIGNsZWFyKGV2ZW50PzogRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gICAgdGhpcy52YWx1ZSA9IG5ldyBGaWxlSW5wdXQoW10pO1xuICAgIHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlID0gbnVsbDtcbiAgICB0aGlzLl9vbkNoYW5nZSh0aGlzLnZhbHVlKTtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ2NoYW5nZScsIFsnJGV2ZW50J10pXG4gIGNoYW5nZShldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCBmaWxlTGlzdDogRmlsZUxpc3QgfCBudWxsID0gKDxIVE1MSW5wdXRFbGVtZW50PmV2ZW50LnRhcmdldCkuZmlsZXM7XG4gICAgY29uc3QgZmlsZUFycmF5OiBGaWxlW10gPSBbXTtcbiAgICBpZiAoZmlsZUxpc3QpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmlsZUFycmF5LnB1c2goZmlsZUxpc3RbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnZhbHVlID0gbmV3IEZpbGVJbnB1dChmaWxlQXJyYXkpO1xuICAgIHRoaXMuX29uQ2hhbmdlKHRoaXMudmFsdWUpO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZm9jdXNvdXQnKVxuICBibHVyKCkge1xuICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX29uVG91Y2hlZCgpO1xuICB9XG5cbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnZGlzYWJsZWQnLCBpc0Rpc2FibGVkKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMubXVsdGlwbGUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodGhpcy5tdWx0aXBsZSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykuY2xpY2soKTtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnN0YXRlQ2hhbmdlcy5jb21wbGV0ZSgpO1xuICAgIHRoaXMuZm0uc3RvcE1vbml0b3JpbmcodGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSwgT3B0aW9uYWwsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRmlsZUlucHV0Q29uZmlnLCBOR1hfTUFUX0ZJTEVfSU5QVVRfQ09ORklHIH0gZnJvbSAnLi4vbW9kZWwvZmlsZS1pbnB1dC1jb25maWcubW9kZWwnO1xuXG5AUGlwZSh7XG4gIG5hbWU6ICdieXRlRm9ybWF0J1xufSlcbmV4cG9ydCBjbGFzcyBCeXRlRm9ybWF0UGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuICBwcml2YXRlIHVuaXQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBAT3B0aW9uYWwoKVxuICAgIEBJbmplY3QoTkdYX01BVF9GSUxFX0lOUFVUX0NPTkZJRylcbiAgICBwcml2YXRlIGNvbmZpZzogRmlsZUlucHV0Q29uZmlnXG4gICkge1xuICAgIHRoaXMudW5pdCA9IGNvbmZpZyA/IGNvbmZpZy5zaXplVW5pdCA6ICdCeXRlJztcbiAgfVxuXG4gIHRyYW5zZm9ybSh2YWx1ZTogYW55LCBhcmdzPzogYW55KTogYW55IHtcbiAgICBpZiAocGFyc2VJbnQodmFsdWUsIDEwKSA+PSAwKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0Qnl0ZXMoK3ZhbHVlLCArYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0Qnl0ZXMoYnl0ZXM6IG51bWJlciwgZGVjaW1hbHM/OiBudW1iZXIpIHtcbiAgICBpZiAoYnl0ZXMgPT09IDApIHtcbiAgICAgIHJldHVybiAnMCAnICsgdGhpcy51bml0O1xuICAgIH1cbiAgICBjb25zdCBCID0gdGhpcy51bml0LmNoYXJBdCgwKTtcbiAgICBjb25zdCBrID0gMTAyNDtcbiAgICBjb25zdCBkbSA9IGRlY2ltYWxzIHx8IDI7XG4gICAgY29uc3Qgc2l6ZXMgPSBbdGhpcy51bml0LCAnSycgKyBCLCAnTScgKyBCLCAnRycgKyBCLCAnVCcgKyBCLCAnUCcgKyBCLCAnRScgKyBCLCAnWicgKyBCLCAnWScgKyBCXTtcbiAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoZG0pKSArICcgJyArIHNpemVzW2ldO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEZvY3VzTW9uaXRvciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9hMTF5JztcbmltcG9ydCB7IEZpbGVJbnB1dENvbXBvbmVudCB9IGZyb20gJy4vZmlsZS1pbnB1dC9maWxlLWlucHV0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCeXRlRm9ybWF0UGlwZSB9IGZyb20gJy4vcGlwZS9ieXRlLWZvcm1hdC5waXBlJztcbmltcG9ydCB7IEZpbGVJbnB1dENvbmZpZyB9IGZyb20gJy4vbW9kZWwvZmlsZS1pbnB1dC1jb25maWcubW9kZWwnO1xuXG5ATmdNb2R1bGUoe1xuICBkZWNsYXJhdGlvbnM6IFtGaWxlSW5wdXRDb21wb25lbnQsIEJ5dGVGb3JtYXRQaXBlXSxcbiAgcHJvdmlkZXJzOiBbRm9jdXNNb25pdG9yXSxcbiAgZXhwb3J0czogW0ZpbGVJbnB1dENvbXBvbmVudCwgQnl0ZUZvcm1hdFBpcGVdXG59KVxuZXhwb3J0IGNsYXNzIE1hdGVyaWFsRmlsZUlucHV0TW9kdWxlIHt9XG4iLCJpbXBvcnQgeyBWYWxpZGF0b3JGbiwgQWJzdHJhY3RDb250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRmlsZUlucHV0IH0gZnJvbSAnLi4vbW9kZWwvZmlsZS1pbnB1dC5tb2RlbCc7XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmlsZVZhbGlkYXRvciB7XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBjb250cm9sIGNvbnRlbnQgb2YgZmlsZXNcbiAgICpcbiAgICogQHBhcmFtIGJ5dGVzIG1heCBudW1iZXIgb2YgYnl0ZXMgYWxsb3dlZFxuICAgKlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgZXhwb3J0IGZ1bmN0aW9uIG1heENvbnRlbnRTaXplKGJ5dGVzOiBudW1iZXIpOiBWYWxpZGF0b3JGbiB7XG4gICAgcmV0dXJuIChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IHwgbnVsbCA9PiB7XG4gICAgICBjb25zdCBzaXplID0gY29udHJvbCAmJiBjb250cm9sLnZhbHVlID8gKGNvbnRyb2wudmFsdWUgYXMgRmlsZUlucHV0KS5maWxlcy5tYXAoZiA9PiBmLnNpemUpLnJlZHVjZSgoYWNjLCBpKSA9PiBhY2MgKyBpLCAwKSA6IDA7XG4gICAgICBjb25zdCBjb25kaXRpb24gPSBieXRlcyA+PSBzaXplO1xuICAgICAgcmV0dXJuIGNvbmRpdGlvblxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiB7XG4gICAgICAgICAgICBtYXhDb250ZW50U2l6ZToge1xuICAgICAgICAgICAgICBhY3R1YWxTaXplOiBzaXplLFxuICAgICAgICAgICAgICBtYXhTaXplOiBieXRlc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkluamVjdGlvblRva2VuIiwiU3ViamVjdCIsImNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSIsIkNvbXBvbmVudCIsIk1hdEZvcm1GaWVsZENvbnRyb2wiLCJOZ0NvbnRyb2wiLCJPcHRpb25hbCIsIlNlbGYiLCJGb2N1c01vbml0b3IiLCJFbGVtZW50UmVmIiwiUmVuZGVyZXIyIiwiSW5wdXQiLCJIb3N0QmluZGluZyIsIkhvc3RMaXN0ZW5lciIsIlBpcGUiLCJJbmplY3QiLCJOZ01vZHVsZSIsIkZpbGVWYWxpZGF0b3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7OztBQUtBLFFBQWEseUJBQXlCLEdBQUcsSUFBSUEsbUJBQWMsQ0FDekQsMkJBQTJCLENBQzVCOzs7O0FBS0Q7OztRQUFBO1NBTUM7UUFBRCxzQkFBQztJQUFELENBQUM7Ozs7Ozs7OztBQ2ZEOzs7UUFHRSxtQkFBb0IsTUFBcUIsRUFBVSxTQUF3QjtZQUF4QiwwQkFBQTtnQkFBQSxnQkFBd0I7O1lBQXZELFdBQU0sR0FBTixNQUFNLENBQWU7WUFBVSxjQUFTLEdBQVQsU0FBUyxDQUFlO1lBQ3pFLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBQyxDQUFPLElBQUssT0FBQSxDQUFD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